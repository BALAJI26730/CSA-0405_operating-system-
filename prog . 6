#include <stdio.h>
#include <limits.h>

struct Process {
    int id;
    int at;
    int bt;   
    int pr;   
    int ct;   
    int tat;  
    int wt;   
    int rt;   
};

int main() {
    int n, completed = 0, time = 0, i, highest;
    float avg_tat = 0, avg_wt = 0;

    printf("Enter number of processes: ");
    scanf("%d", &n);

    struct Process p[n];

    printf("Enter Arrival Time, Burst Time and Priority for each process:\n");
    for (i = 0; i < n; i++) {
        p[i].id = i+1;
        printf("P%d: ", i+1);
        scanf("%d %d %d", &p[i].at, &p[i].bt, &p[i].pr);
        p[i].rt = p[i].bt; // initialize remaining time
        p[i].ct = p[i].tat = p[i].wt = 0;
    }


    while (completed < n) {
        highest = -1;

        for (i = 0; i < n; i++) {
            if (p[i].at <= time && p[i].rt > 0) {
                if (highest == -1 || p[i].pr < p[highest].pr) {
                    highest = i;
                }
            }
        }

        if (highest != -1) {
            p[highest].rt--;

            if (p[highest].rt == 0) {
                completed++;
                p[highest].ct = time + 1;
                p[highest].tat = p[highest].ct - p[highest].at;
                p[highest].wt = p[highest].tat - p[highest].bt;

                avg_tat += p[highest].tat;
                avg_wt += p[highest].wt;
            }
        }
        time++;
    }

    printf("\nProcess\tAT\tBT\tPriority\tCT\tTAT\tWT\n");
    for (i = 0; i < n; i++) {
        printf("P%d\t%d\t%d\t%d\t\t%d\t%d\t%d\n",
               p[i].id, p[i].at, p[i].bt, p[i].pr,
               p[i].ct, p[i].tat, p[i].wt);
    }

    printf("\nAverage Turnaround Time = %.2f", avg_tat/n);
    printf("\nAverage Waiting Time = %.2f\n", avg_wt/n);

    return 0;
} 

output :
Enter number of processes: 3
Enter Arrival Time, Burst Time and Priority for each process:
P1: 0 5 2
P2: 1 3 1
P3: 2 4 3

Process   AT   BT   Priority   CT   TAT   WT
P1        0    5    2         8    8     3
P2        1    3    1         4    3     0
P3        2    4    3        12   10     6

Average Turnaround Time = 7.00
Average Waiting Time = 3.00

